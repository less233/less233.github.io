(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-92449776"],{"40ce":function(t,a,s){},"58ec":function(t,a,s){"use strict";var i=s("d938"),n=s.n(i);n.a},b6dd:function(t,a,s){"use strict";var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"myc-aimp"}},[s("div",{staticClass:"left",on:{click:t.toPlayer}},[s("div",{staticClass:"disc"},[s("img",{attrs:{src:t.musicInfo.picUrl,alt:""}})]),s("div",{staticClass:"easy-info"},[s("div",{staticClass:"song"},[t._v(t._s(t.musicInfo.songName))]),s("div",{staticClass:"singer"},[t._v(t._s(t.musicInfo.singerName))])])]),s("div",{staticClass:"right"},[s("div",{staticClass:"play",on:{click:t.changePlayState}},[s("van-icon",{attrs:{name:this.playerInfo.autoplay?"pause-circle-o":"play-circle-o"}})],1),s("div",{staticClass:"love",on:{click:t.changeLove}},[s("van-icon",{attrs:{name:"bars"}})],1)]),s("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[s("div",{staticClass:"title-text"},[t._v("当前播放")]),s("div",{staticClass:"controls-box"},[s("div",{staticClass:"left"},[s("span",{staticClass:"iconfont"},[t._v("")]),s("div",{staticClass:"text"},[t._v("随机播放")])]),s("van-icon",{attrs:{name:"delete"},on:{click:t.deleteList}})],1),s("div",{staticClass:"list-box"},t._l(t.playList,(function(a,i){return s("div",{key:i,staticClass:"song"},[s("div",{staticClass:"van-ellispsis",class:a.isActive?"active":null,on:{click:function(s){return t.playSong(a)}}},[a.isActive?s("van-icon",{class:t.playerInfo.autoplay?"animat":"paused",attrs:{name:"music-o"}}):t._e(),t._v(" "+t._s(a.name)+" "),s("div",{staticClass:"singer"},[t._v("- "+t._s(""==a.ar[0].name?"佚名":a.ar[0].name))])],1),s("van-icon",{attrs:{name:"cross"},on:{click:function(a){return t.deleteOne(i)}}})],1)})),0)])],1)},n=[],e=(s("d81d"),s("fb6a"),s("a434"),s("b0c0"),s("96cf"),s("1da1")),o=s("5530"),c=s("2f62"),r=Object(c["a"])("primaryModule"),l=r.mapState,u=r.mapMutations,p={name:"aimpComponent",computed:Object(o["a"])({},l(["musicInfo","playerInfo","musicList","musicInfFunc","historyList"])),data:function(){return{show:!1,playList:[]}},methods:Object(o["a"])(Object(o["a"])({},u(["changePlayerInfo","addMusicList","changeMusicInfo","changeHistoryList"])),{},{toPlayer:function(){this.$router.push({name:"Player"})},changePlayState:function(){this.changePlayerInfo({autoplay:!this.playerInfo.autoplay}),this.playerInfo.autoplay?this.playerInfo.audio.play():this.playerInfo.audio.pause()},changeLove:function(){this.show=!0,this.getPlayList()},getPlayList:function(){var t=this;if(0!=this.musicList.length){this.$toast.loading({duration:0});var a="";this.musicList.map((function(t){a+=t+","})),a=a.slice(0,-1),this.axios({method:"GET",url:"/song/detail",params:{ids:a}}).then((function(a){t.$toast.clear(),200==a.data.code&&(t.playList=a.data.songs)})).catch((function(a){t.$toast.clear()}))}},deleteList:function(){this.addMusicList([]),this.playList=[]},deleteOne:function(t){this.playList.splice(t,1);var a=this.musicList;a.splice(t,1),this.addMusicList(a)},judgeNowPlay:function(){var t=this.musicInfo.ids;this.playList.map((function(a){1==a.isActive&&(a.isActive=!1),a.id!=t||(a.isActive=!0)}))},playSong:function(t){var a=this;return Object(e["a"])(regeneratorRuntime.mark((function s(){var i,n,e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a.$toast.loading({duration:0}),i=a.historyList,i.unshift(t.id),a.changeHistoryList(i),n={},n.src=a.musicURL+t.id,n.autoplay=!0,s.next=9,a.changePlayerInfo(n);case 9:return e={},e.ids=t.id,""==t.ar[0].name?e.singerName="佚名":e.singerName=t.ar[0].name,s.next=14,a.changeMusicInfo(e);case 14:return s.next=16,a.musicInfFunc();case 16:a.$toast.clear(),a.playerInfo.audio.play(),setTimeout((function(){0==a.playerInfo.audio.readyState&&(a.playerInfo.audio.pause(),a.changePlayerInfo({autoplay:!1}))}),2e3);case 19:case"end":return s.stop()}}),s)})))()}})},d=p,h=(s("58ec"),s("2877")),v=Object(h["a"])(d,i,n,!1,null,"ab18c75a",null);a["a"]=v.exports},cd56:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"main"},[s("van-nav-bar",{attrs:{border:!1},scopedSlots:t._u([{key:"left",fn:function(){return[s("div",{staticClass:"my-popup"},[s("van-icon",{style:{color:0==t.tabsActive?"white":"black"},attrs:{name:"wap-nav",badge:"23"},on:{click:t.showMyPopup}})],1)]},proxy:!0},{key:"title",fn:function(){return[s("van-tabbar",{attrs:{fixed:!1},on:{change:t.goPage},model:{value:t.tabsActive,callback:function(a){t.tabsActive=a},expression:"tabsActive"}},t._l(t.tabbarData,(function(a,i){return s("van-tabbar-item",{key:i,style:{color:0==t.tabsActive?"white":"black"}},[t._v(t._s(a.title))])})),1)]},proxy:!0},{key:"right",fn:function(){return[s("van-icon",{staticClass:"my-search",style:{color:0==t.tabsActive?"white":"black"},attrs:{name:"search"},on:{click:t.toSearch}})]},proxy:!0}])}),s("van-popup",{style:{height:"100%"},attrs:{position:"left"},model:{value:t.myPopupShow,callback:function(a){t.myPopupShow=a},expression:"myPopupShow"}},[s("div",{staticClass:"pop-bg"},[s("img",{staticClass:"auto-img",attrs:{src:t.userInfo.backgroundUrl,alt:""}})]),s("div",{staticClass:"pop-contain"},[this.isLogin?s("div",[this.isLogin?s("div",{staticClass:"islogin-box"},[s("div",{staticClass:"user",on:{click:t.toPersonal}},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:this.userInfo.avatarUrl,alt:""}})]),s("div",{staticClass:"uname"},[t._v(t._s(this.userInfo.nickname))])]),s("div",{staticClass:"check-ins",on:{click:t.checkins}},[s("span",{staticClass:"iconfont"},[t._v("")]),s("div",{staticClass:"text"},[t._v("签到")])])]):t._e(),s("van-button",{staticClass:"logout",attrs:{type:"danger"},on:{click:t.logout}},[t._v("退出登录")])],1):s("div",{staticClass:"notlogin-box"},[s("div",{staticClass:"prompt"},[t._v("手机电脑多端同步，尽享海量高品质音乐")]),s("van-button",{attrs:{color:"#fe3a3b",round:""},on:{click:t.toLogin}},[t._v("立即登录")])],1)])]),t.isLoad?s("van-loading"):t._e(),s("router-view"),s("aimp-component")],1)},n=[],e=(s("b0c0"),s("5530")),o=(s("40ce"),s("b6dd")),c=s("2f62"),r=Object(c["a"])("primaryModule"),l=r.mapState,u=r.mapMutations,p={components:{aimpComponent:o["a"]},computed:Object(e["a"])({},l(["isLogin","userInfo"])),data:function(){return{tabbarData:[{title:"我的",url:{name:"My"}},{title:"发现",url:{name:"Discover"}}],myPopupShow:!1,tabsActive:1,isLoad:!1}},methods:Object(e["a"])(Object(e["a"])({},u(["changeLogin"])),{},{showMyPopup:function(){this.myPopupShow=!0},goPage:function(t){this.$router.push(this.tabbarData[t].url)},checkins:function(){this.$toast("签到成功")},toLogin:function(){this.$router.push({name:"Login"})},toPersonal:function(){var t=this;this.isLoad=!0,setTimeout((function(){t.isLoad=!1,t.$router.push({name:"Personal"})}),800)},toSearch:function(){this.$router.push({name:"Search"})},logout:function(){this.changeLogin(!1),localStorage.clear()}}),mounted:function(){"My"==this.$route.name&&(this.tabsActive=0)}},d=p,h=s("2877"),v=Object(h["a"])(d,i,n,!1,null,null,null);a["default"]=v.exports},d938:function(t,a,s){}}]);
//# sourceMappingURL=chunk-92449776.9eb55b6a.js.map
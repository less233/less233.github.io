(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df9ce6ca"],{1276:function(t,e,s){"use strict";var i=s("d784"),a=s("44e7"),n=s("825a"),r=s("1d80"),c=s("4840"),o=s("8aa5"),d=s("50c4"),l=s("14c3"),u=s("9263"),f=s("d039"),p=[].push,v=Math.min,h=4294967295,g=!f((function(){return!RegExp(h,"y")}));i("split",2,(function(t,e,s){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,s){var i=String(r(this)),n=void 0===s?h:s>>>0;if(0===n)return[];if(void 0===t)return[i];if(!a(t))return e.call(i,t,n);var c,o,d,l=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,g=new RegExp(t.source,f+"g");while(c=u.call(g,i)){if(o=g.lastIndex,o>v&&(l.push(i.slice(v,c.index)),c.length>1&&c.index<i.length&&p.apply(l,c.slice(1)),d=c[0].length,v=o,l.length>=n))break;g.lastIndex===c.index&&g.lastIndex++}return v===i.length?!d&&g.test("")||l.push(""):l.push(i.slice(v)),l.length>n?l.slice(0,n):l}:"0".split(void 0,0).length?function(t,s){return void 0===t&&0===s?[]:e.call(this,t,s)}:e,[function(e,s){var a=r(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a,s):i.call(String(a),e,s)},function(t,a){var r=s(i,t,this,a,i!==e);if(r.done)return r.value;var u=n(t),f=String(this),p=c(u,RegExp),b=u.unicode,m=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),x=new p(g?u:"^(?:"+u.source+")",m),y=void 0===a?h:a>>>0;if(0===y)return[];if(0===f.length)return null===l(x,f)?[f]:[];var C=0,A=0,k=[];while(A<f.length){x.lastIndex=g?A:0;var w,_=l(x,g?f:f.slice(A));if(null===_||(w=v(d(x.lastIndex+(g?0:A)),f.length))===C)A=o(f,A,b);else{if(k.push(f.slice(C,A)),k.length===y)return k;for(var S=1;S<=_.length-1;S++)if(k.push(_[S]),k.length===y)return k;A=C=w}}return k.push(f.slice(C)),k}]}),!g)},"2f14":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));s("99af"),s("fb6a");var i=s("d4ec"),a=s("bee2"),n=function(){function t(){Object(i["a"])(this,t)}return Object(a["a"])(t,[{key:"queryString",value:function(t){var e="";for(var s in t)e+="".concat(s,"=").concat(t[s],"&");return e.slice(0,-1)}}]),t}(),r=new n},3174:function(t,e,s){},"76a1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"pay"},[s("van-nav-bar",{attrs:{title:"提交订单","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":t.back}}),s("div",{staticClass:"address-box"},[s("div",{staticClass:"address"},[s("div",{staticClass:"clearfix",on:{click:t.openAddressBox}},[s("div",{staticClass:"fl address-title"},[t._v("选择收货地址")]),s("div",{staticClass:"fl arrow-box"},[s("van-icon",{staticClass:"arrow-icon",attrs:{name:"arrow"}})],1)]),s("div",{staticClass:"address-content"},[s("div",{staticClass:"clearfix"},[s("div",{staticClass:"fl name"},[t._v(t._s(t.currentAddress.name))]),s("div",{staticClass:"fl phone"},[t._v(t._s(t.currentAddress.tel))])]),s("div",{staticClass:"address-info"},[t._v(t._s(t.currentAddress.address))])])])]),s("div",{staticClass:"order-info"},[s("div",{staticClass:"order-box"},[s("div",{staticClass:"order-title"},[t._v("订单信息")]),s("div",t._l(t.shopbagData,(function(e,i){return s("div",{key:i,staticClass:"clearfix cell-box"},[s("div",{staticClass:"fl pro-img"},[s("img",{staticClass:"auto-img",attrs:{src:e.small_img,alt:""}})]),s("div",{staticClass:"fl pro-info"},[s("div",{staticClass:"text-box"},[s("div",{staticClass:"clearfix"},[s("div",{staticClass:"fl text-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"fl text-rule"},[t._v(t._s(e.rule))])]),s("div",{staticClass:"text-enname"},[t._v(t._s(e.enname))])]),s("div",{staticClass:"price-box"},[s("div",{staticClass:"fl price"},[t._v("￥"+t._s(e.price))]),s("div",{staticClass:"fr count"},[t._v("x"+t._s(e.count))])])])])})),0),s("div",{staticClass:"pro-box"},[s("div",{staticClass:"clearfix pro-boxing"},[s("div",{staticClass:"fl pro-count"},[t._v("共计 "+t._s(t.product.count)+" 件商品")]),s("div",{staticClass:"fr pro-total"},[t._v("合计 ￥"+t._s(t.product.total))])]),s("div",{staticClass:"left-box left"}),s("div",{staticClass:"left-box right"})])])]),s("div",{staticClass:"pay-btn"},[s("van-button",{attrs:{round:"",block:"",color:"#0b34ba"},on:{click:t.pay}},[t._v("去支付")])],1),s("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[s("div",{staticClass:"address-title-box"},[t._v("选择收货地址")]),s("van-address-list",{attrs:{list:t.list,"default-tag-text":"默认"},on:{select:t.selectAddress,add:t.newAddress},model:{value:t.chosenAddressId,callback:function(e){t.chosenAddressId=e},expression:"chosenAddressId"}})],1)],1)])},a=[],n=(s("d81d"),s("b0c0"),s("ac1f"),s("1276"),s("3174"),s("2f14")),r={data:function(){return{sids:[],currentAddress:{name:"",tel:"",address:""},list:[],shopbagData:[],product:{count:0,total:0},chosenAddressId:"",isOpen:!1}},methods:{back:function(){this.$router.go(-1)},openAddressBox:function(){this.isOpen=!0},selectAddress:function(t,e){for(var s in this.isOpen=!1,this.currentAddress)this.currentAddress[s]=t[s]},newAddress:function(){this.$router.push({name:"Newaddress"})},getReceiveAddress:function(){var t=this,e=localStorage.getItem("owner");e&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/findAddress",params:{appkey:this.appkey,tokenString:e}}).then((function(e){t.$toast.clear(),2e4==e.data.code&&e.data.result.map((function(e){var s=e.province+e.city+e.county+e.addressDetail;t.list.push({id:e.aid,name:e.name,tel:e.tel,address:s,isDefault:Boolean(e.isDefault)}),Boolean(e.isDefault)&&(t.chosenAddressId=e.aid,t.currentAddress.name=e.name,t.currentAddress.tel=e.tel,t.currentAddress.address=s)}))})).catch((function(e){t.$toast.clear()})))},getShopbagDataBySids:function(){var t=this,e=localStorage.getItem("owner");e&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/commitShopcart",params:{appkey:this.appkey,tokenString:e,sids:JSON.stringify(this.sids)}}).then((function(e){t.$toast.clear(),5e4==e.data.code&&(e.data.result.map((function(e){t.product.count+=e.count,t.product.total+=e.count*e.price})),t.shopbagData=e.data.result)})).catch((function(e){t.$toast.clear()})))},pay:function(){var t=this;if(""!=this.chosenAddressId){var e=localStorage.getItem("owner");if(e){var s=n["a"].queryString({appkey:this.appkey,tokenString:e,sids:JSON.stringify(this.sids),phone:this.currentAddress.tel,address:this.currentAddress.address,receiver:this.currentAddress.name});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/pay",data:s}).then((function(e){t.$toast.clear(),t.$toast(e.data.msg),6e4==e.data.code&&t.$router.push({name:"Order"})})).catch((function(e){t.$toast.clear()}))}}else this.$toast("请选择收货地址")}},created:function(){this.sids=this.$route.query.sids.split("-"),this.getReceiveAddress(),this.getShopbagDataBySids()}},c=r,o=s("2877"),d=Object(o["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},8418:function(t,e,s){"use strict";var i=s("c04e"),a=s("9bf2"),n=s("5c6c");t.exports=function(t,e,s){var r=i(e);r in t?a.f(t,r,n(0,s)):t[r]=s}},"99af":function(t,e,s){"use strict";var i=s("23e7"),a=s("d039"),n=s("e8b5"),r=s("861d"),c=s("7b0b"),o=s("50c4"),d=s("8418"),l=s("65f0"),u=s("1dde"),f=s("b622"),p=s("2d00"),v=f("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",b=p>=51||!a((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),m=u("concat"),x=function(t){if(!r(t))return!1;var e=t[v];return void 0!==e?!!e:n(t)},y=!b||!m;i({target:"Array",proto:!0,forced:y},{concat:function(t){var e,s,i,a,n,r=c(this),u=l(r,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(n=-1===e?r:arguments[e],x(n)){if(a=o(n.length),f+a>h)throw TypeError(g);for(s=0;s<a;s++,f++)s in n&&d(u,f,n[s])}else{if(f>=h)throw TypeError(g);d(u,f++,n)}return u.length=f,u}})},b0c0:function(t,e,s){var i=s("83ab"),a=s("9bf2").f,n=Function.prototype,r=n.toString,c=/^\s*function ([^ (]*)/,o="name";i&&!(o in n)&&a(n,o,{configurable:!0,get:function(){try{return r.call(this).match(c)[1]}catch(t){return""}}})},bee2:function(t,e,s){"use strict";function i(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}s.d(e,"a",(function(){return a}))},d4ec:function(t,e,s){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}s.d(e,"a",(function(){return i}))},d81d:function(t,e,s){"use strict";var i=s("23e7"),a=s("b727").map,n=s("1dde"),r=s("ae40"),c=n("map"),o=r("map");i({target:"Array",proto:!0,forced:!c||!o},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(t,e,s){"use strict";var i=s("23e7"),a=s("861d"),n=s("e8b5"),r=s("23cb"),c=s("50c4"),o=s("fc6a"),d=s("8418"),l=s("b622"),u=s("1dde"),f=s("ae40"),p=u("slice"),v=f("slice",{ACCESSORS:!0,0:0,1:2}),h=l("species"),g=[].slice,b=Math.max;i({target:"Array",proto:!0,forced:!p||!v},{slice:function(t,e){var s,i,l,u=o(this),f=c(u.length),p=r(t,f),v=r(void 0===e?f:e,f);if(n(u)&&(s=u.constructor,"function"!=typeof s||s!==Array&&!n(s.prototype)?a(s)&&(s=s[h],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return g.call(u,p,v);for(i=new(void 0===s?Array:s)(b(v-p,0)),l=0;p<v;p++,l++)p in u&&d(i,l,u[p]);return i.length=l,i}})}}]);
//# sourceMappingURL=chunk-df9ce6ca.7be0f27c.js.map
{"version":3,"sources":["webpack:///./src/components/aimpComponent.vue?e59e","webpack:///./src/components/aimpComponent.vue?9187","webpack:///src/components/aimpComponent.vue","webpack:///./src/components/aimpComponent.vue?3f46","webpack:///./src/components/aimpComponent.vue","webpack:///./src/views/Main.vue?b984","webpack:///src/views/Main.vue","webpack:///./src/views/Main.vue?13d2","webpack:///./src/views/Main.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","on","toPlayer","musicInfo","picUrl","_v","_s","songName","singerName","changePlayState","playerInfo","autoplay","changeLove","model","value","callback","$$v","show","expression","deleteList","_l","item","index","key","class","isActive","$event","playSong","_e","name","ar","deleteOne","staticRenderFns","computed","data","playList","methods","$router","push","changePlayerInfo","audio","play","pause","getPlayList","musicList","length","$toast","loading","map","str","v","slice","axios","method","url","params","ids","addMusicList","splice","list","judgeNowPlay","id","nowMusicId","component","scopedSlots","_u","fn","style","color","tabsActive","showMyPopup","proxy","goPage","title","toSearch","height","myPopupShow","userInfo","backgroundUrl","toPersonal","avatarUrl","nickname","checkins","logout","toLogin","components","aimpComponent","tabbarData","isLoad","setTimeout","changeLogin","localStorage","clear","mounted","$route"],"mappings":"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","file":"js/chunk-92449776.9eb55b6a.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./aimpComponent.vue?vue&type=style&index=0&id=ab18c75a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./aimpComponent.vue?vue&type=style&index=0&id=ab18c75a&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"myc-aimp\"}},[_c('div',{staticClass:\"left\",on:{\"click\":_vm.toPlayer}},[_c('div',{staticClass:\"disc\"},[_c('img',{attrs:{\"src\":_vm.musicInfo.picUrl,\"alt\":\"\"}})]),_c('div',{staticClass:\"easy-info\"},[_c('div',{staticClass:\"song\"},[_vm._v(_vm._s(_vm.musicInfo.songName))]),_c('div',{staticClass:\"singer\"},[_vm._v(_vm._s(_vm.musicInfo.singerName))])])]),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"play\",on:{\"click\":_vm.changePlayState}},[_c('van-icon',{attrs:{\"name\":this.playerInfo.autoplay?'pause-circle-o':'play-circle-o'}})],1),_c('div',{staticClass:\"love\",on:{\"click\":_vm.changeLove}},[_c('van-icon',{attrs:{\"name\":\"bars\"}})],1)]),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('div',{staticClass:\"title-text\"},[_vm._v(\"当前播放\")]),_c('div',{staticClass:\"controls-box\"},[_c('div',{staticClass:\"left\"},[_c('span',{staticClass:\"iconfont\"},[_vm._v(\"\")]),_c('div',{staticClass:\"text\"},[_vm._v(\"随机播放\")])]),_c('van-icon',{attrs:{\"name\":\"delete\"},on:{\"click\":_vm.deleteList}})],1),_c('div',{staticClass:\"list-box\"},_vm._l((_vm.playList),function(item,index){return _c('div',{key:index,staticClass:\"song\"},[_c('div',{staticClass:\"van-ellispsis\",class:item.isActive?'active':null,on:{\"click\":function($event){return _vm.playSong(item)}}},[(item.isActive)?_c('van-icon',{class:_vm.playerInfo.autoplay?'animat':'paused',attrs:{\"name\":\"music-o\"}}):_vm._e(),_vm._v(\" \"+_vm._s(item.name)+\" \"),_c('div',{staticClass:\"singer\"},[_vm._v(\"- \"+_vm._s(item.ar[0].name==\"\"?\"佚名\":item.ar[0].name))])],1),_c('van-icon',{attrs:{\"name\":\"cross\"},on:{\"click\":function($event){return _vm.deleteOne(index)}}})],1)}),0)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"myc-aimp\">\r\n    <div class=\"left\" @click=\"toPlayer\">\r\n      <div class=\"disc\">\r\n        <img :src=\"musicInfo.picUrl\" alt />\r\n      </div>\r\n      <div class=\"easy-info\">\r\n        <div class=\"song\">{{musicInfo.songName}}</div>\r\n        <div class=\"singer\">{{musicInfo.singerName}}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"right\">\r\n      <div class=\"play\" @click=\"changePlayState\">\r\n        <van-icon :name=\"this.playerInfo.autoplay?'pause-circle-o':'play-circle-o'\" />\r\n      </div>\r\n      <div class=\"love\" @click=\"changeLove\">\r\n        <van-icon name=\"bars\" />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 弹出层 -->\r\n    <van-popup v-model=\"show\" position=\"bottom\">\r\n      <div class=\"title-text\">当前播放</div>\r\n\r\n      <!-- 控制层 -->\r\n      <div class=\"controls-box\">\r\n        <div class=\"left\">\r\n          <span class=\"iconfont\">&#xe631;</span>\r\n          <div class=\"text\">随机播放</div>\r\n        </div>\r\n\r\n        <van-icon name=\"delete\" @click=\"deleteList\" />\r\n      </div>\r\n\r\n      <!-- 列表 -->\r\n      <div class=\"list-box\">\r\n        <div class=\"song\" v-for=\"(item,index) in playList\" :key=\"index\">\r\n          <div class=\"van-ellispsis\" :class=\"item.isActive?'active':null\" @click=\"playSong(item)\">\r\n            <van-icon\r\n              v-if=\"item.isActive\"\r\n              name=\"music-o\"\r\n              :class=\"playerInfo.autoplay?'animat':'paused'\"\r\n            />\r\n            {{item.name}}\r\n            <div class=\"singer\">- {{item.ar[0].name==\"\"?\"佚名\":item.ar[0].name}}</div>\r\n          </div>\r\n\r\n          <!-- x按钮 -->\r\n          <van-icon name=\"cross\" @click=\"deleteOne(index)\" />\r\n        </div>\r\n      </div>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nconst { mapState, mapMutations } = createNamespacedHelpers(\"primaryModule\");\r\n\r\nexport default {\r\n  name: \"aimpComponent\",\r\n\r\n  computed: {\r\n    ...mapState([\r\n      \"musicInfo\",\r\n      \"playerInfo\",\r\n      \"musicList\",\r\n      \"musicInfFunc\",\r\n      \"historyList\",\r\n    ]),\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      // 是否显示弹出层\r\n      show: false,\r\n      // 当前播放歌单\r\n      playList: [],\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations([\r\n      \"changePlayerInfo\",\r\n      \"addMusicList\",\r\n      \"changeMusicInfo\",\r\n      \"changeHistoryList\",\r\n    ]),\r\n\r\n    //   去播放器\r\n    toPlayer() {\r\n      this.$router.push({ name: \"Player\" });\r\n    },\r\n\r\n    // 播放/暂停方法\r\n    changePlayState() {\r\n      \r\n      this.changePlayerInfo({ autoplay: !this.playerInfo.autoplay });\r\n      if (this.playerInfo.autoplay) {\r\n        this.playerInfo.audio.play();\r\n      } else {\r\n        this.playerInfo.audio.pause();\r\n      }\r\n    },\r\n\r\n    // 显示隐藏\r\n    changeLove() {\r\n      \r\n      this.show = true;\r\n      this.getPlayList();\r\n    },\r\n\r\n    // 获取当前播放列表\r\n    getPlayList() {\r\n      if (this.musicList.length == 0) return;\r\n      this.$toast.loading({ duration: 0 });\r\n\r\n      let str = \"\";\r\n      this.musicList.map((v) => {\r\n        \r\n        str += v + \",\";\r\n      });\r\n      \r\n\r\n      str = str.slice(0, -1);\r\n      \r\n\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/song/detail\",\r\n        params: {\r\n          ids: str,\r\n        },\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          \r\n          if (result.data.code != 200) return;\r\n          this.playList = result.data.songs;\r\n        })\r\n        .catch((err) => {\r\n          this.$toast.clear();\r\n        });\r\n    },\r\n\r\n    // 删除当前歌单\r\n    deleteList() {\r\n      this.addMusicList([]);\r\n      this.playList = [];\r\n    },\r\n\r\n    // 当前歌单中删除一首歌曲\r\n    deleteOne(index) {\r\n      \r\n\r\n      this.playList.splice(index, 1);\r\n      let list = this.musicList;\r\n      list.splice(index, 1);\r\n      this.addMusicList(list);\r\n    },\r\n\r\n    // 判断当前播放的歌曲\r\n    judgeNowPlay() {\r\n      let nowMusicId = this.musicInfo.ids;\r\n\r\n      this.playList.map((v) => {\r\n        v.isActive == true ? (v.isActive = false) : null;\r\n        if (v.id == nowMusicId) {\r\n          v.isActive = true;\r\n          return;\r\n        }\r\n      });\r\n    },\r\n\r\n    // 播放歌曲\r\n    async playSong(item) {\r\n      this.$toast.loading({ duration: 0 });\r\n\r\n      let hlist = this.historyList;\r\n      hlist.unshift(item.id);\r\n      \r\n      this.changeHistoryList(hlist);\r\n\r\n      // 修改播放器详情\r\n      let playerOptions = {};\r\n      playerOptions.src = this.musicURL + item.id;\r\n      //   playerOptions.duration = item.duration;\r\n      playerOptions.autoplay = true;\r\n\r\n      await this.changePlayerInfo(playerOptions);\r\n\r\n      // 修改音乐详情\r\n      let musicOptions = {};\r\n      musicOptions.ids = item.id;\r\n      // musicOptions.songName = item.name;\r\n      if (item.ar[0].name == \"\") {\r\n        musicOptions.singerName = \"佚名\";\r\n      } else {\r\n        musicOptions.singerName = item.ar[0].name;\r\n      }\r\n\r\n      await this.changeMusicInfo(musicOptions);\r\n\r\n      await this.musicInfFunc();\r\n\r\n      this.$toast.clear();\r\n      this.playerInfo.audio.play();\r\n      setTimeout(() => {\r\n        \r\n        if (this.playerInfo.audio.readyState == 0) {\r\n          this.playerInfo.audio.pause();\r\n          this.changePlayerInfo({ autoplay: false });\r\n        }\r\n      }, 2000);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#myc-aimp {\r\n  background-color: #fff;\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 48px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  box-shadow: 1px 0 0 0.5px #cccccc;\r\n  z-index: 9999;\r\n\r\n  .left {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    .disc {\r\n      width: 35px;\r\n      height: 35px;\r\n      border-radius: 50%;\r\n      overflow: hidden;\r\n      margin-left: 10px;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      box-shadow: 0 0 0.5px 0 #f0f0f0;\r\n\r\n      img {\r\n        width: 100%;\r\n        transform: scale(1.4);\r\n      }\r\n    }\r\n\r\n    .easy-info {\r\n      margin-left: 6px;\r\n\r\n      .song {\r\n        font-size: 14px;\r\n        color: #333333;\r\n        font-weight: bold;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        width: 200px;\r\n      }\r\n\r\n      .singer {\r\n        font-size: 12px;\r\n        color: #7d7d7d;\r\n        margin-top: 4px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .right {\r\n    width: 70px;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-right: 10px;\r\n    font-size: 26px;\r\n  }\r\n\r\n  .van-popup {\r\n    box-sizing: border-box;\r\n    height: 480px;\r\n    width: 92%;\r\n    margin-left: 4%;\r\n    margin-bottom: 22px;\r\n    border-radius: 20px;\r\n    color: #333333;\r\n    padding: 15px;\r\n    padding-right: 19px;\r\n    overflow: hidden;\r\n    position: fixed;\r\n    z-index: 9999;\r\n\r\n    .title-text {\r\n      margin-top: 5px;\r\n      font-size: 16px;\r\n      font-weight: bold;\r\n    }\r\n\r\n    .controls-box {\r\n      // background-color: red;\r\n      margin: 8px 0;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n\r\n      .left {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        color: #b7b7b7;\r\n\r\n        .text {\r\n          margin-left: 8px;\r\n          color: #4d4d4d;\r\n        }\r\n      }\r\n\r\n      .van-icon {\r\n        font-size: 18px;\r\n        color: #b7b7b7;\r\n      }\r\n    }\r\n\r\n    .list-box {\r\n      height: 380px;\r\n      overflow: auto;\r\n\r\n      .song {\r\n        margin: 25px 0;\r\n        font-size: 14px;\r\n        color: #333333;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n\r\n        .van-icon {\r\n          font-size: 18px;\r\n          color: #b7b7b7;\r\n        }\r\n\r\n        .van-ellispsis {\r\n          display: flex;\r\n          align-items: center;\r\n          flex: 1;\r\n\r\n          .singer {\r\n            font-size: 10px;\r\n            color: #b7b7b7;\r\n          }\r\n\r\n          .van-icon {\r\n            color: #f43e3e;\r\n            margin-right: 8px;\r\n          }\r\n        }\r\n\r\n        .active {\r\n          color: #f43e3e;\r\n\r\n          .singer {\r\n            color: #f43e3e;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .animat {\r\n    animation: turn 10s linear infinite normal none running;\r\n  }\r\n\r\n  .paused {\r\n    animation: turn 10s linear infinite normal none paused;\r\n  }\r\n\r\n  @keyframes turn {\r\n    0% {\r\n      transform: rotateZ(0deg);\r\n    }\r\n\r\n    50% {\r\n      transform: rotateZ(180deg);\r\n    }\r\n\r\n    100% {\r\n      transform: rotateZ(360deg);\r\n    }\r\n  }\r\n  // 引用iconfont\r\n  @font-face {\r\n    font-family: \"iconfont\";\r\n    src: url(\"../assets/icon/player/iconfont.eot\");\r\n    src: url(\"../assets/icon/player/iconfont.eot?#iefix\")\r\n        format(\"embedded-opentype\"),\r\n      url(\"../assets/icon/player/iconfont.woff2\") format(\"woff2\"),\r\n      url(\"../assets/icon/player/iconfont.woff\") format(\"woff\"),\r\n      url(\"../assets/icon/player/iconfont.ttf\") format(\"truetype\"),\r\n      url(\"../assets/icon/player/iconfont.svg#iconfont\") format(\"svg\");\r\n  }\r\n\r\n  .iconfont {\r\n    font-family: \"iconfont\" !important;\r\n    font-size: 16px;\r\n    font-style: normal;\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./aimpComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./aimpComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./aimpComponent.vue?vue&type=template&id=ab18c75a&scoped=true&\"\nimport script from \"./aimpComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./aimpComponent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./aimpComponent.vue?vue&type=style&index=0&id=ab18c75a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ab18c75a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('van-nav-bar',{attrs:{\"border\":false},scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('div',{staticClass:\"my-popup\"},[_c('van-icon',{style:({color:_vm.tabsActive==0?'white':'black'}),attrs:{\"name\":\"wap-nav\",\"badge\":\"23\"},on:{\"click\":_vm.showMyPopup}})],1)]},proxy:true},{key:\"title\",fn:function(){return [_c('van-tabbar',{attrs:{\"fixed\":false},on:{\"change\":_vm.goPage},model:{value:(_vm.tabsActive),callback:function ($$v) {_vm.tabsActive=$$v},expression:\"tabsActive\"}},_vm._l((_vm.tabbarData),function(item,index){return _c('van-tabbar-item',{key:index,style:({color:_vm.tabsActive==0?'white':'black'})},[_vm._v(_vm._s(item.title))])}),1)]},proxy:true},{key:\"right\",fn:function(){return [_c('van-icon',{staticClass:\"my-search\",style:({color:_vm.tabsActive==0?'white':'black'}),attrs:{\"name\":\"search\"},on:{\"click\":_vm.toSearch}})]},proxy:true}])}),_c('van-popup',{style:({height:'100%'}),attrs:{\"position\":\"left\"},model:{value:(_vm.myPopupShow),callback:function ($$v) {_vm.myPopupShow=$$v},expression:\"myPopupShow\"}},[_c('div',{staticClass:\"pop-bg\"},[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":_vm.userInfo.backgroundUrl,\"alt\":\"\"}})]),_c('div',{staticClass:\"pop-contain\"},[(this.isLogin)?_c('div',[(this.isLogin)?_c('div',{staticClass:\"islogin-box\"},[_c('div',{staticClass:\"user\",on:{\"click\":_vm.toPersonal}},[_c('div',{staticClass:\"icon\"},[_c('img',{attrs:{\"src\":this.userInfo.avatarUrl,\"alt\":\"\"}})]),_c('div',{staticClass:\"uname\"},[_vm._v(_vm._s(this.userInfo.nickname))])]),_c('div',{staticClass:\"check-ins\",on:{\"click\":_vm.checkins}},[_c('span',{staticClass:\"iconfont\"},[_vm._v(\"\")]),_c('div',{staticClass:\"text\"},[_vm._v(\"签到\")])])]):_vm._e(),_c('van-button',{staticClass:\"logout\",attrs:{\"type\":\"danger\"},on:{\"click\":_vm.logout}},[_vm._v(\"退出登录\")])],1):_c('div',{staticClass:\"notlogin-box\"},[_c('div',{staticClass:\"prompt\"},[_vm._v(\"手机电脑多端同步，尽享海量高品质音乐\")]),_c('van-button',{attrs:{\"color\":\"#fe3a3b\",\"round\":\"\"},on:{\"click\":_vm.toLogin}},[_vm._v(\"立即登录\")])],1)])]),(_vm.isLoad)?_c('van-loading'):_vm._e(),_c('router-view'),_c('aimp-component')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"main\">\r\n    <!-- 导航标签 -->\r\n    <van-nav-bar :border=\"false\">\r\n      <!-- 左边弹出层 -->\r\n      <template #left>\r\n        <div class=\"my-popup\">\r\n          <van-icon\r\n            :style=\"{color:tabsActive==0?'white':'black'}\"\r\n            name=\"wap-nav\"\r\n            badge=\"23\"\r\n            @click=\"showMyPopup\"\r\n          />\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 标题导航栏 -->\r\n      <template #title>\r\n        <van-tabbar v-model=\"tabsActive\" :fixed=\"false\" @change=\"goPage\">\r\n          <van-tabbar-item\r\n            :style=\"{color:tabsActive==0?'white':'black'}\"\r\n            v-for=\"(item, index) in tabbarData\"\r\n            :key=\"index\"\r\n          >{{item.title}}</van-tabbar-item>\r\n        </van-tabbar>\r\n      </template>\r\n\r\n      <!-- 右边搜索框 -->\r\n      <template #right>\r\n        <van-icon\r\n          :style=\"{color:tabsActive==0?'white':'black'}\"\r\n          class=\"my-search\"\r\n          name=\"search\"\r\n          @click=\"toSearch\"\r\n        />\r\n      </template>\r\n    </van-nav-bar>\r\n\r\n    <!-- 弹出层标签 -->\r\n    <van-popup v-model=\"myPopupShow\" position=\"left\" :style=\"{height:'100%'}\">\r\n      <!-- 弹出层背景图片 -->\r\n      <div class=\"pop-bg\">\r\n        <img class=\"auto-img\" :src=\"userInfo.backgroundUrl\" alt />\r\n      </div>\r\n\r\n      <!-- 弹出层主要功能层 -->\r\n      <div class=\"pop-contain\">\r\n        <!-- 已登录显示 -->\r\n        <div v-if=\"this.isLogin\">\r\n          <div v-if=\"this.isLogin\" class=\"islogin-box\">\r\n            <div class=\"user\" @click=\"toPersonal\">\r\n              <div class=\"icon\">\r\n                <img :src=\"this.userInfo.avatarUrl\" alt />\r\n              </div>\r\n              <div class=\"uname\">{{this.userInfo.nickname}}</div>\r\n            </div>\r\n            <div class=\"check-ins\" @click=\"checkins\">\r\n              <span class=\"iconfont\">&#xe501;</span>\r\n              <div class=\"text\">签到</div>\r\n            </div>\r\n          </div>\r\n          <van-button class=\"logout\" type=\"danger\" @click=\"logout\">退出登录</van-button>\r\n        </div>\r\n        <!-- 未登录显示 -->\r\n        <div v-else class=\"notlogin-box\">\r\n          <div class=\"prompt\">手机电脑多端同步，尽享海量高品质音乐</div>\r\n          <van-button color=\"#fe3a3b\" round @click=\"toLogin\">立即登录</van-button>\r\n        </div>\r\n      </div>\r\n    </van-popup>\r\n\r\n    <!-- 加载提示 -->\r\n    <van-loading v-if=\"isLoad\" />\r\n\r\n    <!-- 二级路由 -->\r\n    <router-view />\r\n\r\n    <!-- 底部播放器 -->\r\n    <aimp-component></aimp-component>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"../assets/less/main.less\";\r\nimport aimpComponent from \"@/components/aimpComponent.vue\";\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nconst { mapState, mapMutations } = createNamespacedHelpers(\"primaryModule\");\r\n\r\nexport default {\r\n  components: {\r\n    aimpComponent,\r\n  },\r\n\r\n  computed: {\r\n    ...mapState([\"isLogin\", \"userInfo\"]),\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      tabbarData: [\r\n        {\r\n          title: \"我的\",\r\n          url: { name: \"My\" },\r\n        },\r\n\r\n        {\r\n          title: \"发现\",\r\n          url: { name: \"Discover\" },\r\n        },\r\n\r\n        // {\r\n        //   title: \"云村\",\r\n        //   url: { name: \"CloudVillage\" },\r\n        // },\r\n\r\n        // {\r\n        //   title: \"视频\",\r\n        //   url: { name: \"Video\" },\r\n        // },\r\n      ],\r\n\r\n      myPopupShow: false,\r\n      tabsActive: 1,\r\n      isLoad: false,\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations([\"changeLogin\"]),\r\n\r\n    //显示弹出层myPopupShow\r\n    showMyPopup() {\r\n      this.myPopupShow = true;\r\n      \r\n    },\r\n\r\n    // 跳转路由\r\n    goPage(index) {\r\n      this.$router.push(this.tabbarData[index].url);\r\n    },\r\n\r\n    // 签到\r\n    checkins() {\r\n      this.$toast(\"签到成功\");\r\n    },\r\n\r\n    // 登录\r\n    toLogin() {\r\n      \r\n      this.$router.push({ name: \"Login\" });\r\n    },\r\n\r\n    // 跳转至个人页面\r\n    toPersonal() {\r\n      this.isLoad = true;\r\n      setTimeout(() => {\r\n        this.isLoad = false;\r\n        this.$router.push({ name: \"Personal\" });\r\n      }, 800);\r\n    },\r\n\r\n    // 搜索\r\n    toSearch() {\r\n      this.$router.push({ name: \"Search\" });\r\n    },\r\n\r\n    // 退出登录\r\n    logout() {\r\n      this.changeLogin(false);\r\n      localStorage.clear();\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    if (this.$route.name == \"My\") {\r\n      this.tabsActive = 0;\r\n    }\r\n  },\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=52e9e270&\"\nimport script from \"./Main.vue?vue&type=script&lang=js&\"\nexport * from \"./Main.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}